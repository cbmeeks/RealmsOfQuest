SCREEN		= 7680
COLOR		= 38400
PIC		= 4096
PICTURES	= $A000
DUNDATA		= 49152

SCREENCOLOR	= 36879
TEXTCOLOR	= 646
FAC		= $61
PRINTSTRING_K	= $CB1E
PRINTINT_XA	= $DDCD		; prints x/a integer to the screen
PRINTFAC_K	= $DDD7		; prints FAC to screen
GETIN_K		= $FFE4
PRINTCHAR_K	= $FFD2
RANDOM_K	= $E094
INT_YA2FAC	= $D391		; converts y/a integer to floating point and stores it in FAC
CMP_FAC2AY	= $DC5B		; compares FAC to memory location a/y
STA_FAC2XY	= $DBD4		; stores FAC to memory location x/y
STA_FAC2TEMP1	= $DBCA		; stores FAC in temporary location 1
STA_FAC2AFAC	= $DC0C
STA_AFAC2FAC	= $DBFC
MEM_AY2FAC	= $DBA2		; transfers MFLPT in a/y to FAC
SUB_AY_FAC	= $D850		; FAC = memory at a/y - FAC
INT_FAC		= $DCCC		; perform INT on FAC
ADD_FAC_AY	= $D867		; add fac to MFLPT in a/y then store in FAC
POWER_AFAC_FAC	= $DF7B		; FAC = AFAC ^ FAC
MULTIPLY_FAC10	= $DAE2		; multiply FAC by 10
MULTIPLY_FAC_AY	= $DA28		; FAC = FAC * memory at A/Y

;******************************************************************

INVSIZE		= 10

;		= $10	
PCHARLO		= $39
PCHARHI		= $3A
PNAMELO		= $3B	; pointer to name
PNAMEHI		= $3C


TEMP1		= $48
TEMP2		= $49


MUSICLO1	= $4A
MUSICHI1	= $4B

MUSICLO		= 251
MUSICHI		= 252


PDUNLO		= $3D
PDUNHI		= $3E

TEMPMONS	= $3F

RNDSEED		= 673	; 673-676
TEMPNUMBERKEY	= 677
TEMPNUM		= 678
TEMPSTRING	= 679
TEMPSECMENU	= 680
TEMPSECLO	= 681
TEMPSECHI	= 682
TEMPAUSE	= 683

CTEMP1		= 696
CTEMP2		= 697
CTEMP3		= 698
CTEMP4		= 699

; the following values are temporary combat bonuses
COMBATBACKSTAB	= 700	; 700-705 backstab combat option
COMBATPARRY	= 706	; 706-711 parry combat option
COMBATATTACK	= 712	; 712-717 combat attack bonus (potion of giant strength also provides this)
COMBATARMOR	= 718	; 718-723 combat armor bonus
COMBATSAVE	= 724	; 724-729 combat save bonus
COMBATHASTE1	= 730	; 730-735 is the character hasted for entire combat?
COMBAT_END	= 735

WHICHSONG2	= 742
VIDEOMODE	= 743	; store default 36865 value here
QUITFLAG	= 744
PAUSESOUND1	= 745
PAUSESOUND2	= 746
WHICHSONG	= 747
MUSICNOTEPTR	= 748
MUSICNOTEDUR	= 749
MUSICNOTEPTR2	= 750
MUSICNOTEDUR2	= 751



MUSICOFF	= 828
MB_NUMBER	= 829
MB_HITPOINTS	= 830
MB_HPX		= 831	; 831-837
MF_TYPE		= 838
MF_NUMBER	= 839
MF_HITPOINTS	= 840
MF_HPX		= 841	; 841-853
MORALE		= 854


TEMPBACK	= 935
JOY2		= 936
ORBTEMP		= 937
SPELL_STUNKILL	= 938
SPELL_WIZPRIEST	= 939
SPELLDAM2	= 940
SPELLDAM1	= 941
SPELLINTWIS	= 942
SPELLTYPE	= 943
SPELLAREA	= 944
SPELLFACTOR	= 945
DISARMTRIED	= 946
DISARMTRAP	= 947
TREASURETEMP	= 948
SPECIALATTACK	= 949
DCTEMP		= 950
PARRY		= 951
XPTEMP3		= 952	; 952 - 957 temp FAC
PIRATESHIP	= 958
MONSTERROW	= 959
MONSTERPTR	= 960
ROLLTEMP	= 961
PARTYWINS	= 962
MISSILE		= 963
PLAYERTURN	= 964
PCHARCOMBAT	= 965
MONSTERGREET	= 966
MONSTERDISP	= 967
STATUSTEMP	= 968
UNDERCHAR2	= 969	; tile data under the character after moving
XPTEMP1		= 970
XPTEMP2		= 971
PRINTSINGLETEMP	= 972
MOVEUP		= 973
MOVEDOWN	= 974	; 1=ladder, 2=throne, 3=fountain
TEMPFAROBJECT	= 975
MOVEFRONT	= 976
ANITEMP1	= 977
ANITEMP2	= 978
ANITEMP3	= 979
JOY1		= 980
UNDERCHAR	= 981	; tile data under the character
MATHTEMP	= 982
DICETEMP	= 983
STATCHECK	= 984
MOVETEXT	= 985
DRAWMAPLO2	= 986
DRAWMAPHI2	= 987
DRAWMAPX	= 988
DRAWMAPCARRY	= 989
DRAWMAPLO	= 990
DRAWMAPHI	= 991
SHIFT4		= 992	
CO_TEMP		= 993	; change order routine
COLORPTR	= 994
POSMAPHI	= 995
POSMAPLO	= 996
POSMAPCARRY	= 997
VIEWITEM	= 998
VIEWPOTION	= 999
PCHARTEMP	= 1000
LINEARSEED	= 1001
TEMPNAME	= 1002 ; 1002-1021
TJ		= 1002
DRAWMAPTEMP	= 1002
TEMP4		= 1003
COPYTEMP	= 1004



ASC_A		= 65
ASC_B		= 66
ASC_C		= 67
ASC_D		= 68
ASC_E		= 69
ASC_F		= 70
ASC_F1		= 133
ASC_F7		= 136
ASC_REVON	= 18
ASC_REVOFF	= 146
ASC_DEL		= 20

;********************************************************************

		.org 4607
		.segment "STARTUP"

; LOAD "QUIKMAN.PRG",8,1
		.word	BASIC

; 0 SYS8144
; 0 SYS                                    8    1    4    4

BASIC:	.byte	$0B, $10, $00, $00, $9E, $38, $31, $34, $34, $00, $00, $00, $00

	.byte 0,0
	
.byte 255,255,241,224,196,199,228,228,229,229,228,228,231,228,225,225,255,255,1,0,254,131,61,125,253,253,3,2,254,5,226,242,255,255,255,254,125,59,182,150,150,150,54,118,246,246,244,244,255,255,0,0,255,0,127,255,255,255,255,255,127,0,0,0,255,255,7,7,247,55,151,198,229,253,253,253,252,60,60,60,255,255,240,224,223,176,103,207,223,223,223,192,192,127,64,0,255,255,63,31,239,55,155,217,236,236,236,12,12,244,4,0,255,255,248,240,236,220,156,140,236,236,236,236,236,236,228,224,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,252,249,243,231,230,242,242,242,242,242,242,242,240,255,255,30,12,225,243,62,28,217,225,225,225,225,225,225,225,255,255,63,30,204,229,101,37,165,165,165,164,166,167,167,135,255,255,0,0,255,224,207,223,159,128,255,0,0,255,255,255,255,255,1,1,253,13,225,241,255,1,249,29,13,197,197,193,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,248,243,231,204,155,155,155,155,155,155,147,147,131,131,255,255,0,252,255,3,253,253,252,254,254,254,254,254,254,254,255,255,254,124,57,147,150,150,150,150,150,150,22,22,20,20,255,255,0,255,255,0,127,127,127,127,127,127,0,0,0,126,255,255,7,199,247,55,151,199,231,255,255,255,63,63,63,63,225,225,225,225,225,225,225,255,255,255,255,255,255,255,255,255,240,248,248,252,252,252,252,255,255,255,255,255,254,252,252,252,112,48,56,60,62,31,31,255,255,192,128,63,96,192,223,223,126,63,31,0,0,0,128,255,255,7,3,249,28,14,230,230,124,252,132,6,7,15,63,255,255,255,249,241,225,205,221,189,31,31,31,15,7,135,199,255,255,252,248,226,206,206,230,230,224,224,224,193,131,135,143,255,255,255,254,253,251,246,230,230,224,224,224,224,224,224,224,255,255,0,0,255,0,0,255,255,255,255,252,0,0,0,0,255,255,7,7,246,117,53,197,229,240,48,48,32,32,32,96,255,255,128,0,255,240,224,207,159,225,225,225,97,97,97,97,255,255,1,1,253,13,1,241,255,135,132,132,4,12,28,60,255,255,0,0,63,51,33,12,156,255,255,127,0,0,0,0,255,255,0,0,255,243,225,238,239,193,193,129,3,3,7,15,255,255,63,63,191,191,191,63,63,255,255,255,255,255,255,255,255,255,255,254,252,248,249,251,255,193,224,240,248,252,254,255,255,255,0,0,255,48,48,183,183,252,120,48,0,0,0,0,255,255,0,0,255,48,48,179,179,16,16,16,16,48,112,240,255,255,0,0,254,48,49,177,179,127,127,127,63,63,63,63,255,255,63,63,127,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,252,252,252,252,252,252,252,254,255,255,255,255,255,255,255,255,223,223,223,223,159,159,31,15,7,129,192,224,240,248,255,255,242,242,242,240,240,144,8,4,130,193,32,16,8,4,255,255,189,189,189,185,177,145,129,129,129,192,224,112,120,252,255,255,230,230,230,230,226,226,226,226,226,0,0,0,0,4,255,255,230,230,230,230,230,228,228,224,240,120,60,30,31,31,255,255,255,255,255,127,0,0,0,126,63,31,0,0,0,128,255,255,253,253,252,254,63,63,63,127,252,132,4,4,12,60,255,255,128,255,0,0,255,255,255,255,127,63,0,0,0,0,255,255,1,253,29,13,229,229,225,225,225,193,1,3,7,15,255,255,252,252,252,252,252,252,252,252,252,252,254,255,255,255,255,255,239,239,239,239,111,111,111,15,15,14,0,0,128,192,255,255,255,255,255,255,255,255,255,255,191,31,31,31,63,127,255,255,255,255,255,255,255,255,255,255,255,255,255,254,252,248,255,255,183,183,183,183,151,135,135,135,135,135,0,0,0,0,255,255,179,179,155,217,209,224,224,224,240,240,0,0,0,0,255,255,179,179,55,103,79,15,31,31,63,62,0,0,0,1,255,255,255,255,255,255,255,255,255,191,63,63,63,127,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,0,0,0,0,1,2,6,12,0,0,0,0,0,0,1,159,63,127,223,191,63,127,255,255,0,0,0,1,7,63,255,255,255,255,255,255,255,255,254,254,0,31,124,252,248,240,224,224,192,192,128,0,0,0,0,0,0,224,124,15,3,0,0,0,0,1,1,3,3,7,7,7,0,0,0,0,224,120,12,6,70,195,227,241,240,248,252,254,0,0,0,0,0,0,0,255,0,0,128,192,192,224,112,112,0,0,0,0,0,0,0,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,3,2,2,0,0,0,0,0,1,3,6,8,32,64,176,120,120,124,60,9,25,49,97,193,129,1,0,0,0,0,0,0,0,0,0,255,255,255,255,255,255,255,255,255,127,7,3,1,0,0,0,255,254,255,255,255,254,255,255,255,255,255,255,255,255,127,127,0,0,0,0,0,0,0,0,0,0,0,0,1,1,131,3,7,15,7,7,15,15,15,15,63,127,127,252,248,240,240,240,255,255,255,255,255,255,255,248,255,255,159,62,12,124,28,255,56,28,222,239,239,249,188,255,223,159,159,14,14,30,126,254,0,0,0,0,128,128,192,192,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4,4,4,4,4,4,6,15,15,27,51,49,48,112,112,112,62,30,30,15,7,3,1,0,0,192,240,255,127,63,15,3,0,0,0,128,192,192,192,192,192,64,0,192,224,224,224,224,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,63,63,31,31,14,14,14,14,14,12,12,12,12,4,0,0,7,7,14,15,15,14,12,30,28,31,31,56,56,48,112,120,255,119,7,255,0,0,0,1,70,204,158,37,96,64,7,8,239,239,204,206,135,55,35,163,225,1,1,129,255,251,127,35,252,252,124,124,252,252,254,254,254,254,254,254,254,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,252,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,0,128,240,255,255,255,255,255,255,255,255,255,255,255,255,255,0,0,0,0,224,252,255,255,255,255,255,255,255,255,255,255,0,0,0,0,0,0,128,248,255,255,255,255,255,255,255,255,0,0,0,0,0,0,0,0,0,224,252,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,128,248,255,255,255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,224,252,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,12,24,48,32,0,0,3,6,12,12,12,24,48,192,128,0,0,0,0,1,64,128,0,0,0,0,0,0,0,1,0,0,3,28,96,128,1,0,0,0,0,0,0,0,112,252,7,3,224,24,6,1,224,240,112,48,48,24,12,12,6,3,32,176,216,108,102,55,0,0,0,0,0,0,0,64,96,56,28,14,7,3,0,0,0,0,1,1,1,1,3,3,3,3,3,3,11,143,247,56,255,254,255,255,255,255,255,240,249,253,243,227,254,248,240,192,17,49,224,192,59,255,135,63,255,255,249,128,0,0,0,0,243,191,31,7,255,255,255,255,255,255,255,31,7,1,0,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,127,31,0,0,0,0,128,128,128,128,128,192,192,192,192,192,192,0,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,255,192,128,248,255,255,255,255,255,255,255,255,255,255,254,252,253,2,96,192,195,198,216,241,230,236,232,208,179,31,31,251,227,123,51,108,152,48,64,128,0,17,227,193,195,195,135,135,15,159,0,0,8,16,0,64,1,3,7,31,15,15,15,143,143,143,1,0,0,0,0,0,32,224,192,192,192,128,129,131,135,7,179,219,113,29,4,2,1,0,0,0,255,246,246,243,243,241,0,0,0,0,0,0,128,192,48,12,4,248,0,0,0,0,59,14,0,0,0,0,0,0,0,0,0,0,0,0,0,5,128,0,0,0,0,0,0,1,6,4,4,7,3,7,127,252,0,0,0,0,28,38,34,33,177,240,232,180,156,132,194,64,0,0,0,0,0,0,12,30,179,209,80,112,56,24,12,0,0,1,1,1,1,0,0,0,0,0,128,144,252,100,102,34,0,128,128,128,128,192,192,192,192,64,96,48,0,12,14,6,255,255,255,255,255,3,252,255,255,255,255,255,255,31,236,227,255,255,255,255,255,255,127,159,207,239,247,249,254,31,224,255,255,255,255,255,255,255,255,255,255,255,255,255,127,63,15,240,255,255,255,255,255,255,255,255,255,255,255,255,255,255,254,1,255,255,255,255,255,255,255,254,252,253,251,247,231,207,63,255,254,249,247,239,223,191,63,127,255,255,255,255,255,255,255,255,15,223,191,191,223,192,255,255,255,255,255,255,255,255,255,255,254,249,248,248,124,28,222,223,223,255,255,255,255,255,255,255,7,227,57,12,3,1,0,0,224,224,240,254,255,255,255,255,255,255,255,255,31,231,251,252,255,127,63,63,31,159,207,231,159,254,252,252,255,255,191,127,255,255,255,255,255,255,255,255,15,31,31,63,255,255,255,255,255,255,255,255,255,255,255,255,249,248,248,248,248,252,248,252,248,252,252,252,248,248,248,255,128,128,128,0,0,0,1,3,5,5,9,30,52,104,217,163,27,55,104,80,112,224,224,192,128,0,0,0,63,127,224,192,96,160,240,236,131,65,48,8,4,2,3,1,240,252,62,14,32,48,48,48,16,144,240,0,0,0,0,128,64,32,24,127,0,0,0,0,1,1,1,3,3,3,3,7,14,12,12,156,51,113,97,225,192,192,128,128,128,0,0,0,0,0,0,0,6,2,2,2,131,130,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255,255,0,0,0,0,0,0,0,0,3,124,0,255,255,255,255,255,0,0,0,3,2,6,121,206,56,195,0,255,255,255,255,255,0,15,248,3,125,199,156,115,206,24,0,247,243,251,253,252,15,240,0,225,131,60,224,128,0,0,0,255,255,255,255,255,255,96,0,63,223,15,15,7,3,1,0,255,255,255,255,252,243,199,31,23,252,255,254,254,252,248,0,240,199,184,96,192,192,129,131,247,14,254,12,0,0,0,0,71,142,12,28,56,240,224,128,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,5,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,232,148,31,7,0,0,0,0,0,0,0,0,0,0,0,0,124,120,224,192,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,248,251,250,250,250,251,248,255,252,253,252,253,253,253,255,255,12,239,47,236,45,237,12,255,69,93,68,246,246,198,255,255,69,85,85,85,213,213,69,255,68,109,108,237,237,237,255,255,28,221,221,28,223,223,28,255,34,170,42,106,106,34,255,255,84,213,213,68,111,111,108,255,42,170,170,170,170,138,255,255,68,237,237,108,109,109,108,255,191,191,31,223,223,215,255,255,65,213,213,85,213,213,85,255,16,118,112,117,117,20,255,255,192,234,234,234,234,234,192,255,136,186,136,186,186,138,255,255,28,189,189,188,191,191,28,255,136,219,216,219,219,216,255,255,68,213,213,84,85,85,69,255,143,183,183,183,183,143,255,255,69,237,237,109,237,237,236,255,26,90,8,109,109,13,255,255,81,85,85,81,85,85,21,255,225,239,233,237,237,225,255,255,8,107,107,8,91,91,72,255,84,85,20,87,87,84,255,255,248,250,250,248,251,251,187,255,92,221,92,93,93,69,255,255,168,170,170,168,171,171,136,255,81,85,85,85,85,84,255,255,221,221,221,93,93,93,69,255,113,118,118,118,118,113,255,255,21,117,117,17,213,213,21,255,142,190,142,190,190,142,255,255,17,118,118,22,118,118,17,255,55,183,23,215,215,17,255,255,227,235,235,225,237,237,225,255,20,85,84,87,87,20,255,255,95,95,95,31,191,191,191,255,127,255,127,127,127,95,255

;********************************************************************
;START
;********************************************************************

START:
		LDA #15
		STA 36878

		LDA #0
		STA 36874	; turn off all sound channels
		STA 36875
		STA 36876
		STA 36877
        
        lda #147
        jsr $ffd2
        lda #8
        jsr $ffd2
        
        lda #100
        sta 808     ;   turn off runstop/restore
        
        LDA 186
        STA 1020    ;   store drive number in 1020

		LDA #26
		STA 36879
        
        
        ; resize screen
        lda 36864
        clc
        adc #2
        sta 36864
        
        lda #23
        sta 36867    ; number of rows
        lda #20
        sta 36866   ; number of columns
        
        
		LDA #204
		STA 36869	; set start of graphics memory to 4096

        
        ; display screen
		LDX #0
    @l1:
        lda #6
        sta 37888,x
    
        txa
        clc

        adc #33
        sta 4096,x
        
        inx
        cpx #220
        bne @l1
        
        ; set colors
        
        ldx #0
    @l2:
        lda #0
        sta 37888+20*0,x
        sta 37888+20*1,x
        sta 37888+20*2,x
        
        lda #0
        sta 37888+20*10,x
        
        inx
        cpx #20
        bne @l2
        
        lda #7
        sta 828
        
        
LOOP:
        jsr @setcolor
		JSR GETIN_K
		CMP #32
		BNE LOOP
		JMP EXITDEMO

@setcolor:
        inc 829
        lda 829
        cmp #0
        bne @exitcolor
        inc 830
        lda 830
        cmp #0
        bne @exitcolor
        
        ldx #0
        lda 828
    @l3:
        sta 37888+20*3,x
        inx
        cpx #140
        bne @l3
        
        clc
        adc #1
        sta 828
        cmp #8
        bne @exitcolor
        lda #3
        sta 828
        
@exitcolor:
        rts

;--------------------------------------------------------


	
;********************************************************************

EXITDEMO:
        lda #0
        sta 828
        sta 829
        sta 830

        ; set screen back to normal
        lda 36864
        sec
        sbc #2
        sta 36864
        
        lda #46
        sta 36867    ; number of rows
        lda #22
        sta 36866   ; number of columns

		LDA #42
		STA 36879
          
        lda 1020
        clc
        adc #48
        sta @SCREEN8+1
        
		LDA #192
		STA 36869

		LDA #<(@SCREEN6)
		LDY #>(@SCREEN6)
		JSR PRINTSTRING_K
		LDA #34
		JSR PRINTCHAR_K
		LDA #<(@SCREEN7)
		LDY #>(@SCREEN7)
		JSR PRINTSTRING_K
		LDA #34
		JSR PRINTCHAR_K
		LDA #<(@SCREEN8)
		LDY #>(@SCREEN8)
		JSR PRINTSTRING_K

		LDA #4
		STA 198
		LDA #13
		STA 631
		LDA #82
		STA 632
		LDA #213
		STA 633
		LDA #13
		STA 634
		RTS

@SCREEN6:
	.byte 28				; red color
	.byte 147,17,17
	.byte "LOAD",0

@SCREEN7:
	.byte "RQ4.LOADER",0

@SCREEN8:
	.byte ",8"
	.byte 19,0

;********************************************************************

